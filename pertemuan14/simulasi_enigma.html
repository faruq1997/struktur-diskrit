<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulator Enigma - Interaktif</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --bs-dark: #121212;
            --bs-darker: #0a0a0a;
            --bs-primary: #0d6efd;
            --bs-success: #198754;
            --bs-warning: #ffc107;
            --bs-info: #0dcaf0;
        }
        
        body {
            background-color: var(--bs-darker);
            color: #f8f9fa;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            padding-top: 20px;
            padding-bottom: 40px;
        }
        
        .enigma-card {
            background: linear-gradient(145deg, #1e1e1e, #2a2a2a);
            border: 1px solid #444;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }
        
        .enigma-card:hover {
            transform: translateY(-5px);
        }
        
        .card-header {
            background: linear-gradient(90deg, #2c3e50, #4a6491);
            border-bottom: 2px solid var(--bs-primary);
            border-radius: 15px 15px 0 0 !important;
            padding: 1.2rem;
        }
        
        .rotor-badge {
            font-size: 0.85rem;
            padding: 0.5rem 0.8rem;
            border-radius: 10px;
            margin: 0.2rem;
            cursor: help;
        }
        
        .rotor-i { background: linear-gradient(135deg, #6f42c1, #8a63d2); }
        .rotor-ii { background: linear-gradient(135deg, #20c997, #3dd9a5); }
        .rotor-iii { background: linear-gradient(135deg, #fd7e14, #ff9a3d); }
        
        .form-control, .form-select {
            background-color: #2c2c2c;
            border: 1px solid #555;
            color: #f8f9fa;
            border-radius: 8px;
            padding: 0.75rem;
        }
        
        .form-control:focus, .form-select:focus {
            background-color: #333;
            border-color: var(--bs-primary);
            color: #f8f9fa;
            box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
        }
        
        .form-label {
            font-weight: 600;
            color: #adb5bd;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-enigma {
            background: linear-gradient(135deg, var(--bs-primary), #0b5ed7);
            border: none;
            border-radius: 10px;
            padding: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
        }
        
        .btn-enigma:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(13, 110, 253, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--bs-success), #157347);
        }
        
        .lamp-indicator {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            margin: 0 auto;
            transition: all 0.3s ease;
            border: 3px solid #555;
        }
        
        .lamp-on {
            background: linear-gradient(135deg, #20c997, #3dd9a5);
            box-shadow: 0 0 20px rgba(32, 201, 151, 0.7);
            border-color: #20c997;
        }
        
        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .tooltip-inner {
            max-width: 300px;
            padding: 0.75rem 1rem;
            background-color: #2c3e50;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        .bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before {
            border-top-color: #2c3e50;
        }
        
        .component-explanation {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--bs-primary);
            padding: 1rem;
            border-radius: 0 8px 8px 0;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
        
        .rotor-visual {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .rotor-disk {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
            border: 3px solid #444;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: #fff;
            position: relative;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .rotor-disk::after {
            content: '▲';
            position: absolute;
            top: -15px;
            color: var(--bs-warning);
            font-size: 1.2rem;
        }
        
        .connection-line {
            height: 3px;
            background: linear-gradient(90deg, #555, #888, #555);
            flex-grow: 1;
            margin-top: 35px;
            border-radius: 3px;
        }
        
        @media (max-width: 768px) {
            .rotor-visual {
                gap: 0.5rem;
            }
            
            .rotor-disk {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center mb-5">
            <h1 class="display-4 fw-bold text-primary mb-3">
                <i class="bi bi-shield-lock-fill"></i> Simulator Mesin Enigma
            </h1>
            <p class="lead text-light mb-4">Simulasi interaktif mesin enkripsi Enigma yang digunakan dalam Perang Dunia II</p>
            <div class="row justify-content-center">
                <div class="col-md-10">
                    <div class="alert alert-info bg-dark border-info">
                        <i class="bi bi-info-circle-fill"></i> 
                        <strong>Petunjuk:</strong> Atur konfigurasi yang sama di kedua sisi (Pengirim & Penerima) untuk enkripsi/dekripsi yang berhasil. Gunakan tooltip (<i class="bi bi-question-circle"></i>) untuk penjelasan setiap komponen.
                    </div>
                </div>
            </div>
        </header>

        <div class="row g-4">
            <!-- ========== PENGIRIM ========== -->
            <div class="col-lg-6">
                <div class="enigma-card h-100">
                    <div class="card-header">
                        <h3 class="mb-0 text-white">
                            <i class="bi bi-send-fill"></i> Operator Pengirim
                            <span class="badge bg-warning float-end">Enkripsi</span>
                        </h3>
                    </div>
                    <div class="card-body p-4">
                        <h5 class="text-info mb-3">
                            <i class="bi bi-key-fill"></i> Konfigurasi Enkripsi
                        </h5>
                        
                        <!-- Rotor Configuration -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-gear-fill"></i> Urutan Rotor
                                <i class="bi bi-question-circle text-info" 
                                   data-bs-toggle="tooltip" 
                                   data-bs-placement="top"
                                   title="Urutan 3 rotor dari kiri ke kanan. Setiap rotor memiliki wiring internal yang berbeda untuk mengenkripsi huruf."></i>
                            </label>
                            <div class="rotor-visual mb-3">
                                <div class="rotor-disk rotor-i" data-bs-toggle="tooltip" title="Rotor I: Wiring EKMFLGDQVZNTOWYHXUSPAIBRCJ">I</div>
                                <div class="connection-line"></div>
                                <div class="rotor-disk rotor-ii" data-bs-toggle="tooltip" title="Rotor II: Wiring AJDKSIRUXBLHWTMCQGZNPYFVOE">II</div>
                                <div class="connection-line"></div>
                                <div class="rotor-disk rotor-iii" data-bs-toggle="tooltip" title="Rotor III: Wiring BDFHJLCPRTXVZNYEIWGAKMUSQO">III</div>
                            </div>
                            <select class="form-select" id="rotorOrder">
                                <option value="123">I – II – III (Standar)</option>
                                <option value="132">I – III – II</option>
                                <option value="213">II – I – III</option>
                                <option value="231">II – III – I</option>
                                <option value="312">III – I – II</option>
                                <option value="321">III – II – I</option>
                            </select>
                            <div class="component-explanation mt-2">
                                <small><i class="bi bi-lightbulb"></i> <strong>Rotor</strong>: Komponen utama Enigma yang berputar setiap huruf, mengubah jalur listrik untuk enkripsi. Setiap rotor memiliki wiring internal unik.</small>
                            </div>
                        </div>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-signpost-fill"></i> Posisi Awal Rotor
                                    <i class="bi bi-question-circle text-info" 
                                       data-bs-toggle="tooltip" 
                                       data-bs-placement="top"
                                       title="Posisi awal setiap rotor (3 huruf A-Z). Contoh: AAA berarti semua rotor di posisi A."></i>
                                </label>
                                <input type="text" class="form-control text-uppercase" id="startPos" maxlength="3" value="AAA" placeholder="AAA">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-plug-fill"></i> Plugboard
                                    <i class="bi bi-question-circle text-info" 
                                       data-bs-toggle="tooltip" 
                                       data-bs-placement="top"
                                       title="Koneksi kabel yang menukar pasangan huruf sebelum dan sesudah proses rotor. Format: pasangan huruf dipisahkan spasi (contoh: AB CD EF)."></i>
                                </label>
                                <input type="text" class="form-control text-uppercase" id="plugboard" value="AQ BT CX DY EU FP GW HX IV JZ" placeholder="AQ BT CX ...">
                            </div>
                        </div>
                        
                        <!-- Plaintext Input -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-chat-left-text-fill"></i> Plaintext (Pesan Asli)
                            </label>
                            <textarea class="form-control" id="plainIn" rows="4" placeholder="Ketik pesan yang akan dienkripsi..."></textarea>
                            <div class="form-text text-light-emphasis">Hanya huruf A-Z yang akan dienkripsi. Spasi dan karakter lain akan dipertahankan.</div>
                        </div>
                        
                        <!-- Encrypt Button -->
                        <button class="btn btn-enigma btn-primary w-100 mb-3" onclick="kirim()">
                            <i class="bi bi-lock-fill"></i> Enkripsi & Kirim via Radio
                        </button>
                        
                        <!-- Status -->
                        <div class="mt-4">
                            <label class="form-label">
                                <i class="bi bi-broadcast"></i> Status Transmisi
                            </label>
                            <div class="status-badge bg-dark border border-success" id="sendStatus">
                                <i class="bi bi-hourglass-split"></i> Menunggu enkripsi...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ========== PENERIMA ========== -->
            <div class="col-lg-6">
                <div class="enigma-card h-100">
                    <div class="card-header">
                        <h3 class="mb-0 text-white">
                            <i class="bi bi-inbox-fill"></i> Operator Penerima
                            <span class="badge bg-success float-end">Dekripsi</span>
                        </h3>
                    </div>
                    <div class="card-body p-4">
                        <h5 class="text-success mb-3">
                            <i class="bi bi-key-fill"></i> Konfigurasi Dekripsi
                        </h5>
                        
                        <!-- Configuration Match Indicator -->
                        <div class="alert alert-warning bg-dark border-warning mb-4">
                            <i class="bi bi-exclamation-triangle-fill"></i>
                            <strong>Penting:</strong> Konfigurasi harus SAMA dengan pengirim untuk dekripsi berhasil!
                        </div>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-gear-fill"></i> Urutan Rotor
                                </label>
                                <select class="form-select" id="rotorOrder2">
                                    <option value="123">I – II – III (Standar)</option>
                                    <option value="132">I – III – II</option>
                                    <option value="213">II – I – III</option>
                                    <option value="231">II – III – I</option>
                                    <option value="312">III – I – II</option>
                                    <option value="321">III – II – I</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-signpost-fill"></i> Posisi Awal Rotor
                                </label>
                                <input type="text" class="form-control text-uppercase" id="startPos2" maxlength="3" value="AAA" placeholder="AAA">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-plug-fill"></i> Plugboard
                            </label>
                            <input type="text" class="form-control text-uppercase" id="plugboard2" value="AQ BT CX DY EU FP GW HX IV JZ" placeholder="AQ BT CX ...">
                        </div>
                        
                        <!-- Ciphertext Input -->
                        <div class="mb-4">
                            <label class="form-label">
                                <i class="bi bi-chat-left-text-fill"></i> Ciphertext (Pesan Terenkripsi)
                            </label>
                            <textarea class="form-control" id="cipherIn" rows="4" placeholder="Pesan terenkripsi akan muncul di sini..."></textarea>
                            <div class="form-text text-light-emphasis">Pesan terenkripsi dari pengirim akan otomatis muncul di sini.</div>
                        </div>
                        
                        <!-- Decrypt Button & Lamp Indicator -->
                        <div class="row g-3 align-items-center">
                            <div class="col-md-8">
                                <button class="btn btn-enigma btn-success w-100" onclick="terima()">
                                    <i class="bi bi-unlock-fill"></i> Dekripsi & Baca Pesan
                                </button>
                            </div>
                            <div class="col-md-4 text-center">
                                <div class="lamp-indicator" id="lamp2" data-bs-toggle="tooltip" title="Indikator berhasil dekripsi">
                                    <i class="bi bi-question-lg"></i>
                                </div>
                                <small class="text-muted mt-2 d-block">Indikator Lampu</small>
                            </div>
                        </div>
                        
                        <!-- Decrypted Message Display -->
                        <div class="mt-4">
                            <label class="form-label">
                                <i class="bi bi-chat-left-fill"></i> Hasil Dekripsi
                            </label>
                            <div class="alert alert-dark border-success" id="decryptedResult">
                                <i class="bi bi-chat-quote"></i> Hasil dekripsi akan muncul di sini...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Information Section -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="enigma-card">
                    <div class="card-header">
                        <h4 class="mb-0 text-white">
                            <i class="bi bi-info-square-fill"></i> Informasi Mesin Enigma & Sejarah
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        <div class="row">
                            <!-- Gambar Mesin Enigma -->
                            <div class="col-md-4 mb-4">
                                <div class="text-center">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Label-enigma.jpg/250px-Label-enigma.jpg" 
                                         alt="Mesin Enigma dengan label bagian-bagiannya" 
                                         class="img-fluid rounded border border-secondary mb-3"
                                         style="max-width: 100%; height: auto;">
                                    <p class="small text-light-emphasis">
                                        <i class="bi bi-camera-fill"></i> Mesin Enigma dengan label bagian-bagiannya
                                    </p>
                                </div>
                            </div>
                            
                            <!-- Video YouTube -->
                            <div class="col-md-8 mb-4">
                                <div class="ratio ratio-16x9">
                                    <iframe width="560" height="315" src="https://www.youtube.com/embed/QTAWkcB6JtE?si=MqsM6qiXz7mdxzY7" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
                                </div>
                                <p class="small text-light-emphasis mt-2">
                                    <i class="bi bi-youtube"></i> Video penjelasan cara kerja mesin Enigma
                                </p>
                            </div>
                        </div>
                        
                        <!-- Cara Berbagi Kunci Enigma -->
                        <div class="row mt-4">
                            <div class="col-12">
                                <h5 class="text-warning mb-3">
                                    <i class="bi bi-key-fill"></i> Cara Tentara Jerman Berbagi Kunci Enigma
                                </h5>
                                <div class="alert alert-dark border-warning">
                                    <p class="mb-2">Tentara Jerman menggunakan sistem yang sangat terorganisir untuk berbagi kunci Enigma:</p>
                                    <ol class="mb-0">
                                        <li><strong>Buku Kunci Harian (Schlüsseltafel)</strong>:
                                            <ul class="small mb-2">
                                                <li>Setiap unit menerima buku kunci untuk bulan tertentu</li>
                                                <li>Berisi pengaturan harian: urutan rotor, posisi awal, dan koneksi plugboard</li>
                                                <li>Buku kunci dicetak dengan tinta yang dapat larut dalam air untuk keamanan</li>
                                            </ul>
                                        </li>
                                        <li><strong>Prosedur Pengiriman Pesan</strong>:
                                            <ul class="small mb-2">
                                                <li>Operator memilih <strong>kunci pesan (message key)</strong> acak 3 huruf (misal: "ABC")</li>
                                                <li>Kunci pesan dienkripsi dua kali menggunakan pengaturan harian</li>
                                                <li>Hasil enkripsi (6 huruf) dikirim sebagai <strong>indikator</strong> di awal pesan</li>
                                                <li>Penerima mendekripsi indikator untuk mendapatkan kunci pesan</li>
                                            </ul>
                                        </li>
                                        <li><strong>Keamanan Tambahan</strong>:
                                            <ul class="small">
                                                <li>Pengaturan diubah setiap hari (kadang setiap 8 jam di akhir perang)</li>
                                                <li>Buku kunci berbeda untuk angkatan darat, laut, dan udara</li>
                                                <li>Prosedur ketat untuk menghancurkan buku kunci jika terancam ditangkap</li>
                                            </ul>
                                        </li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Komponen Enigma -->
                        <div class="row mt-4">
                            <div class="col-md-4 mb-3">
                                <div class="component-explanation">
                                    <h6><i class="bi bi-gear text-primary"></i> Rotor</h6>
                                    <p class="small mb-0">Komponen berputar yang mengubah jalur listrik. Setiap rotor memiliki wiring internal yang berbeda dan berputar seperti odometer.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="component-explanation">
                                    <h6><i class="bi bi-plug text-success"></i> Plugboard</h6>
                                    <p class="small mb-0">Papan koneksi yang menukar pasangan huruf sebelum dan sesudah proses rotor, meningkatkan kompleksitas enkripsi.</p>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="component-explanation">
                                    <h6><i class="bi bi-arrow-left-right text-warning"></i> Reflector</h6>
                                    <p class="small mb-0">Komponen tetap yang memantulkan sinyal kembali melalui rotor, membuat enkripsi dan dekripsi menggunakan proses yang sama.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-secondary bg-dark border-secondary mt-3">
                            <i class="bi bi-lightbulb-fill"></i> <strong>Fakta Menarik:</strong> Mesin Enigma memiliki sekitar 158 quintillion (158×10¹⁸) kemungkinan konfigurasi. Sekutu membutuhkan ribuan orang dan mesin "Bombe" untuk memecahkan kode Enigma, yang memperpendek Perang Dunia II sekitar 2 tahun.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Additional Resources & Timeline -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="enigma-card">
                    <div class="card-header">
                        <h4 class="mb-0 text-white">
                            <i class="bi bi-clock-history"></i> Timeline Sejarah & Sumber Lainnya
                        </h4>
                    </div>
                    <div class="card-body p-4">
                        <div class="row">
                            <!-- Timeline Sejarah Enigma -->
                            <div class="col-md-6 mb-4">
                                <h5 class="text-info mb-3">
                                    <i class="bi bi-calendar-range"></i> Timeline Sejarah Enigma
                                </h5>
                                <div class="timeline">
                                    <div class="d-flex mb-3">
                                        <div class="flex-shrink-0">
                                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                                <strong>1918</strong>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-primary">Awal Pengembangan</h6>
                                            <p class="small mb-0">Arthur Scherbius mulai mengembangkan mesin Enigma untuk keperluan komersial setelah Perang Dunia I.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex mb-3">
                                        <div class="flex-shrink-0">
                                            <div class="bg-warning text-dark rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                                <strong>1926</strong>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-warning">Adopsi Militer Jerman</h6>
                                            <p class="small mb-0">Angkatan Laut Jerman (Kriegsmarine) mulai menggunakan Enigma, diikuti angkatan darat (Wehrmacht) pada 1928.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex mb-3">
                                        <div class="flex-shrink-0">
                                            <div class="bg-danger text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                                <strong>1939-1945</strong>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-danger">Penggunaan Intensif PD II</h6>
                                            <p class="small mb-0">Enigma digunakan secara luas oleh Jerman Nazi selama Perang Dunia II untuk komunikasi militer rahasia.</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex mb-3">
                                        <div class="flex-shrink-0">
                                            <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                                <strong>1941</strong>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-success">Pemecahan Kode</h6>
                                            <p class="small mb-0">Tim di Bletchley Park (Inggris) yang dipimpin Alan Turing berhasil memecahkan kode Enigma dengan mesin "Bombe".</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex">
                                        <div class="flex-shrink-0">
                                            <div class="bg-secondary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;">
                                                <strong>1945</strong>
                                            </div>
                                        </div>
                                        <div class="flex-grow-1 ms-3">
                                            <h6 class="text-secondary">Akhir Penggunaan</h6>
                                            <p class="small mb-0">Penggunaan Enigma berakhir dengan kekalahan Jerman dalam Perang Dunia II. Rahasia pemecahan kode tetap dijaga hingga 1970-an.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Simulasi Lainnya -->
                            <div class="col-md-6 mb-4">
                                <h5 class="text-success mb-3">
                                    <i class="bi bi-link-45deg"></i> Simulasi Enigma Online Lainnya
                                </h5>
                                <div class="alert alert-dark border-info">
                                    <h6>
                                        <i class="bi bi-box-arrow-up-right"></i> 
                                        <a href="https://cryptii.com/pipes/enigma-machine" target="_blank" class="text-info text-decoration-none">
                                            Cryptii.com - Enigma Machine Simulator
                                        </a>
                                    </h6>
                                    <p class="small mb-2">Simulator Enigma online yang lengkap dengan berbagai fitur:</p>
                                    <ul class="small mb-0">
                                        <li>Semua model Enigma (Wehrmacht, Kriegsmarine, dll.)</li>
                                        <li>Konfigurasi rotor dan plugboard yang lengkap</li>
                                        <li>Visualisasi proses enkripsi secara real-time</li>
                                        <li>Ekspor/impor konfigurasi</li>
                                        <li>Antarmuka yang user-friendly</li>
                                    </ul>
                                </div>
                                
                                <div class="alert alert-dark border-warning mt-3">
                                    <h6>
                                        <i class="bi bi-lightbulb"></i> Sumber Belajar Lainnya
                                    </h6>
                                    <ul class="small mb-0">
                                        <li>
                                            <a href="https://en.wikipedia.org/wiki/Enigma_machine" target="_blank" class="text-warning text-decoration-none">
                                                Wikipedia: Enigma Machine
                                            </a> - Artikel lengkap tentang sejarah dan teknis Enigma
                                        </li>
                                        <li>
                                            <a href="https://www.codesandciphers.org.uk/" target="_blank" class="text-warning text-decoration-none">
                                                Codes and Ciphers Heritage Trust
                                            </a> - Museum virtual kriptografi
                                        </li>
                                        <li>
                                            <a href="https://bletchleypark.org.uk/" target="_blank" class="text-warning text-decoration-none">
                                                Bletchley Park
                                            </a> - Situs sejarah tempat Enigma dipecahkan
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="component-explanation mt-3">
                                    <h6><i class="bi bi-info-circle"></i> Pentingnya Simulator</h6>
                                    <p class="small mb-0">Simulator seperti ini membantu memahami prinsip kriptografi klasik dan pentingnya keamanan informasi. Dengan mencoba berbagai konfigurasi, kita dapat menghargai kompleksitas sistem enkripsi yang melindungi komunikasi rahasia.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="text-center mt-5 pt-4 border-top border-secondary">
            <p class="text-light-emphasis">
                <i class="bi bi-cpu-fill"></i> Simulator Enigma Interaktif &copy; 2026 
            </p>
        </footer>
    </div>

    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    /* ---------- ENIGMA CORE ---------- */
    const abc = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const rotorWiring = {
        '1': 'EKMFLGDQVZNTOWYHXUSPAIBRCJ',  // Rotor I
        '2': 'AJDKSIRUXBLHWTMCQGZNPYFVOE',  // Rotor II
        '3': 'BDFHJLCPRTXVZNYEIWGAKMUSQO'   // Rotor III
    };
    const reflector = 'YRUHQSLDPXNGOKMIEBFZCWVJAT';

    function idx(c) { return c.charCodeAt(0) - 65; }
    function chr(i) { return String.fromCharCode(i + 65); }

    // Parse plugboard dari string "AQ BT CX ..."
    function parsePlug(s) {
        const map = {};
        abc.split('').forEach(ch => map[ch] = ch);
        s.toUpperCase().split(/\s+/).forEach(p => {
            if (p.length === 2) {
                const [a, b] = [p[0], p[1]];
                map[a] = b; map[b] = a;
            }
        });
        return map;
    }

    // Enkripsi/dekripsi satu huruf
    function enigmaOne(ch, order, startArr, plugMap) {
        const rotorOrder = [order[0], order[1], order[2]];
        const pos = [startArr[0], startArr[1], startArr[2]];
        
        function rotor(c, rotorNum, reverse = false) {
            const wiring = rotorWiring[rotorNum];
            const rotorIndex = rotorOrder.indexOf(rotorNum);
            const rotorPos = pos[rotorIndex];
            
            let pin = (idx(c) + rotorPos) % 26;
            let out;
            if (reverse) {
                out = wiring.indexOf(chr(pin));
            } else {
                out = idx(wiring[pin]);
            }
            return chr((out - rotorPos + 26) % 26);
        }

        // Proses Enigma
        let c = plugMap[ch] || ch;
        
        // Forward pass melalui rotor
        c = rotor(c, rotorOrder[0], false);
        c = rotor(c, rotorOrder[1], false);
        c = rotor(c, rotorOrder[2], false);
        
        // Reflector
        c = reflector[idx(c)];
        
        // Backward pass melalui rotor
        c = rotor(c, rotorOrder[2], true);
        c = rotor(c, rotorOrder[1], true);
        c = rotor(c, rotorOrder[0], true);
        
        // Plugboard lagi
        c = plugMap[c] || c;
        
        // Putar rotor I (fast rotor)
        pos[0] = (pos[0] + 1) % 26;
        if (pos[0] === 0) {
            pos[1] = (pos[1] + 1) % 26;
            if (pos[1] === 0) {
                pos[2] = (pos[2] + 1) % 26;
            }
        }
        
        return { ch: c, pos: pos };
    }

    /* ---------- PENGIRIM ---------- */
    function kirim() {
        const order = document.getElementById('rotorOrder').value;
        const start = document.getElementById('startPos').value.toUpperCase();
        const plugMap = parsePlug(document.getElementById('plugboard').value);
        const plain = document.getElementById('plainIn').value.toUpperCase();
        
        if (!plain) {
            alert('Silakan masukkan plaintext terlebih dahulu!');
            return;
        }
        
        if (start.length !== 3 || !/^[A-Z]{3}$/.test(start)) {
            alert('Posisi awal harus 3 huruf A-Z!');
            return;
        }
        
        let out = '';
        let pos = [idx(start[0]), idx(start[1]), idx(start[2])];
        
        for (let c of plain) {
            if (abc.includes(c)) {
                const res = enigmaOne(c, order, pos, plugMap);
                out += res.ch;
                pos = res.pos;
            } else {
                out += c;
            }
        }
        
        // Update status
        document.getElementById('sendStatus').innerHTML = 
            `<i class="bi bi-check-circle-fill text-success"></i> Terkirim: <strong>${out.substring(0, 50)}${out.length > 50 ? '...' : ''}</strong>`;
        document.getElementById('sendStatus').className = 'status-badge bg-success bg-opacity-10 border border-success';
        
        // Salin ke penerima
        document.getElementById('cipherIn').value = out;
        
        // Set konfigurasi penerima sama dengan pengirim
        document.getElementById('rotorOrder2').value = order;
        document.getElementById('startPos2').value = start;
        document.getElementById('plugboard2').value = document.getElementById('plugboard').value;
        
        // Reset hasil dekripsi sebelumnya
        document.getElementById('decryptedResult').innerHTML = 
            '<i class="bi bi-chat-quote"></i> Hasil dekripsi akan muncul di sini...';
        document.getElementById('decryptedResult').className = 'alert alert-dark border-success';
    }

    /* ---------- PENERIMA ---------- */
    function terima() {
        const order = document.getElementById('rotorOrder2').value;
        const start = document.getElementById('startPos2').value.toUpperCase();
        const plugMap = parsePlug(document.getElementById('plugboard2').value);
        const cipher = document.getElementById('cipherIn').value.toUpperCase();
        
        if (!cipher) {
            alert('Silakan masukkan ciphertext terlebih dahulu!');
            return;
        }
        
        if (start.length !== 3 || !/^[A-Z]{3}$/.test(start)) {
            alert('Posisi awal harus 3 huruf A-Z!');
            return;
        }
        
        // Reset posisi ke awal
        let pos = [idx(start[0]), idx(start[1]), idx(start[2])];
        let out = '';
        
        for (let c of cipher) {
            if (abc.includes(c)) {
                const res = enigmaOne(c, order, pos, plugMap);
                out += res.ch;
                pos = res.pos;
            } else {
                out += c;
            }
        }
        
        // Tampilkan hasil
        document.getElementById('decryptedResult').innerHTML = 
            `<i class="bi bi-chat-left-text-fill text-success"></i> <strong>Pesan Terdekripsi:</strong><br><span class="mt-2 d-block">${out}</span>`;
        document.getElementById('decryptedResult').className = 'alert alert-success bg-dark border-success';
        
        // Aktifkan lampu indikator
        const lamp = document.getElementById('lamp2');
        lamp.innerHTML = '<i class="bi bi-check-lg"></i>';
        lamp.className = 'lamp-indicator lamp-on';
        lamp.setAttribute('data-bs-original-title', 'Dekripsi berhasil!');
        
        // Reset lampu setelah 2 detik
        setTimeout(() => {
            lamp.innerHTML = '<i class="bi bi-question-lg"></i>';
            lamp.className = 'lamp-indicator';
            lamp.setAttribute('data-bs-original-title', 'Indikator berhasil dekripsi');
        }, 2000);
    }

    /* ---------- INITIALIZATION ---------- */
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Bootstrap tooltips
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
        
        // Auto-uppercase for position inputs
        document.getElementById('startPos').addEventListener('input', function(e) {
            this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 3);
        });
        
        document.getElementById('startPos2').addEventListener('input', function(e) {
            this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 3);
        });
        
        // Auto-uppercase for plugboard
        document.getElementById('plugboard').addEventListener('input', function(e) {
            this.value = this.value.toUpperCase().replace(/[^A-Z\s]/g, '');
        });
        
        document.getElementById('plugboard2').addEventListener('input', function(e) {
            this.value = this.value.toUpperCase().replace(/[^A-Z\s]/g, '');
        });
        
        // Example message button
        document.getElementById('plainIn').placeholder = "Contoh: SERANG PUKUL 0600 DI UTARA";
    });
    </script>
</body>
</html>
