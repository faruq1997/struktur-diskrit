<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>🎮 Boolean Logic Playground</title>

  <!-- Bootstrap 5 & jQuery -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <!-- SortableJS for Drag & Drop -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <!-- Audio -->
  <audio id="successSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_25cba34d0e.mp3?filename=success-1-6297.mp3"></audio>
  <audio id="failSound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_c807b2b775.mp3?filename=error-126627.mp3"></audio>

  <style>
    body {
      background: #0d1b2a;
      color: #ffffff;
      font-family: "Segoe UI", sans-serif;
      padding-bottom: 100px;
    }
    h2, h5 { color: #ffffff; }
    .card {
      background: #1b263b;
      border: 1px solid #2a3f5f;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }
    .btn-custom {
      background-color: #0077b6;
      color: #ffffff;
      border: none;
      transition: 0.3s;
    }
    .btn-custom:hover {
      background-color: #00b4d8;
      box-shadow: 0 0 10px #00b4d8;
    }
    .truth-cell {
      text-align: center;
      font-weight: bold;
    }
    .true { color: #38b000; }
    .false { color: #ff4d6d; }
    #builderArea {
      min-height: 60px;
      border: 2px dashed #00b4d8;
      border-radius: 8px;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      justify-content: center;
      background: #0d1b2a;
    }
    .block {
      padding: 8px 12px;
      background: #0077b6;
      color: white;
      border-radius: 6px;
      cursor: grab;
      user-select: none;
    }
    .timer {
      font-size: 1.2rem;
      font-weight: bold;
      color: #ffd60a;
    }
  </style>
</head>

<body class="container py-4">
  <h2 class="text-center mb-4">🧮 Boolean Logic Playground</h2>

  <!-- 🎓 PENJELASAN -->
  <div class="card p-3 mb-4 text-white">
    <h5>📘 Tentang Permainan</h5>
    <p>
      Eksperimen dan pelajari logika Boolean: <b>Fungsi Komplemen</b> dan <b>Prinsip Dualitas</b>  
      dengan mode belajar interaktif. Dapat dijalankan di HP, laptop, atau infocus.
    </p>
    <ul>
      <li>🎯 <b>Eksperimen:</b> lihat fungsi, dual, dan komplemennya.</li>
      <li>⚡ <b>Quiz Rush:</b> jawab cepat dengan timer 10 detik.</li>
      <li>🧩 <b>Logic Builder:</b> susun ekspresi logika pakai drag & drop.</li>
    </ul>
  </div>

  <!-- 🧪 MODE 1: Eksperimen -->
  <div class="card p-4 mb-4">
    <h5>🧪 Mode 1 – Eksperimen Fungsi Boolean</h5>
    <select id="selectFunction" class="form-select mb-3">
      <option value="1">f₁(x,y,z) = x(y'z' + yz)</option>
      <option value="2">f₂(x,y) = x + y'</option>
      <option value="3">f₃(x,y,z) = (x + y)z'</option>
    </select>
    <div class="d-flex flex-wrap gap-2">
      <button class="btn btn-custom" id="btnDual">🔁 Lihat Dual</button>
      <button class="btn btn-custom" id="btnComplement">🧩 Lihat Komplemen</button>
      <button class="btn btn-secondary" id="btnReset">🔄 Reset</button>
    </div>

    <div class="mt-4 p-3 bg-dark rounded">
      <p><b>Fungsi Asli:</b> <span id="fOriginal" class="text-info"></span></p>
      <p><b>Dualitas:</b> <span id="fDual" class="text-warning"></span></p>
      <p><b>Komplemen (f’):</b> <span id="fComplement" class="text-success"></span></p>
    </div>
  </div>

  <!-- 📊 MODE 2: QUIZ RUSH -->
  <div class="card p-4 mb-4 text-white">
    <h5>⚡ Mode 2 – Quiz Rush</h5>
    <p>Jawab cepat sebelum waktu habis (10 detik per soal)!</p>
    <div class="timer mb-2" id="timer">⏱️ 10s</div>
    <p id="quizQuestion" class="fw-bold">Klik "Mulai" untuk memulai!</p>
    <div class="d-flex gap-2 flex-wrap">
      <button class="btn btn-custom" id="btnTrue">✅ Benar</button>
      <button class="btn btn-custom" id="btnFalse">❌ Salah</button>
      <button class="btn btn-secondary" id="btnStartQuiz">▶️ Mulai</button>
    </div>
    <p class="mt-3" id="quizResult"></p>
  </div>

  <!-- 🧩 MODE 3: DRAG-DROP LOGIC BUILDER -->
  <div class="card p-4 text-white">
    <h5>🧩 Mode 3 – Logic Builder</h5>
    <p>Susun fungsi Boolean dengan blok di bawah, lalu klik "Evaluasi".</p>

    <div class="d-flex flex-wrap gap-2 mb-3">
      <div class="block">x</div>
      <div class="block">y</div>
      <div class="block">z</div>
      <div class="block">x'</div>
      <div class="block">y'</div>
      <div class="block">z'</div>
      <div class="block">+</div>
      <div class="block">·</div>
      <div class="block">(</div>
      <div class="block">)</div>
    </div>

    <div id="builderArea" class="mb-3"></div>
    <button class="btn btn-custom" id="btnEvaluate">✅ Evaluasi</button>
    <button class="btn btn-secondary" id="btnClear">🗑️ Hapus</button>

    <p class="mt-3" id="builderResult"></p>
  </div>

  <!-- ==================== SCRIPT ==================== -->
  <script>
    // 🎯 Fungsi-fungsi dasar
    const functions = {
      1: { original: "f(x,y,z) = x(y'z' + yz)", dual: "x + (y' + z')(y + z)", complement: "x' + (y + z)(y' + z')" },
      2: { original: "f(x,y) = x + y'", dual: "x·y'", complement: "x'·y" },
      3: { original: "f(x,y,z) = (x + y)z'", dual: "(x·y) + z'", complement: "(x'·y') + z" }
    };

    $("#btnDual").click(() => {
      const val = $("#selectFunction").val();
      $("#fOriginal").text(functions[val].original);
      $("#fDual").text(functions[val].dual);
      $("#successSound")[0].play();
    });

    $("#btnComplement").click(() => {
      const val = $("#selectFunction").val();
      $("#fOriginal").text(functions[val].original);
      $("#fComplement").text(functions[val].complement);
      $("#successSound")[0].play();
    });

    $("#btnReset").click(() => {
      $("#fOriginal, #fDual, #fComplement").text("");
      $("#failSound")[0].play();
    });

    // ⚡ QUIZ MODE
    const quizData = [
      { q: "(A + B)' = A' + B' ?", ans: false },
      { q: "(A·B)' = A' + B' ?", ans: true },
      { q: "(A + B)(A' + B') = 0 ?", ans: false },
      { q: "f(x,y,z)=x(y'z'+yz) bernilai 1 saat x=1,y=1,z=0 ?", ans: true },
    ];
    let qIndex = 0, score = 0, timer, timeLeft = 10;

    function startTimer() {
      clearInterval(timer);
      timeLeft = 10;
      $("#timer").text(`⏱️ ${timeLeft}s`);
      timer = setInterval(() => {
        timeLeft--;
        $("#timer").text(`⏱️ ${timeLeft}s`);
        if(timeLeft <= 0) nextQuestion(false);
      }, 1000);
    }

    function nextQuestion(isCorrect) {
      clearInterval(timer);
      if(isCorrect !== null) {
        if(isCorrect) {
          score++;
          $("#successSound")[0].play();
          $("#quizResult").html(`<span class='text-success'>✅ Benar!</span>`);
        } else {
          $("#failSound")[0].play();
          $("#quizResult").html(`<span class='text-danger'>❌ Salah!</span>`);
        }
      }
      qIndex++;
      setTimeout(() => {
        if(qIndex < quizData.length) {
          $("#quizQuestion").text(quizData[qIndex].q);
          $("#quizResult").text("");
          startTimer();
        } else {
          $("#quizQuestion").html(`<b>Quiz selesai!</b>`);
          $("#quizResult").html(`<b>Skor: ${score}/${quizData.length}</b>`);
          $("#successSound")[0].play();
        }
      }, 800);
    }

    $("#btnStartQuiz").click(() => {
      qIndex = 0; score = 0;
      $("#quizQuestion").text(quizData[qIndex].q);
      $("#quizResult").text("");
      startTimer();
    });

    $("#btnTrue").click(() => nextQuestion(true === quizData[qIndex].ans));
    $("#btnFalse").click(() => nextQuestion(false === quizData[qIndex].ans));

    // 🧩 DRAG & DROP BUILDER
    new Sortable(document.querySelectorAll('.block')[0].parentElement, {
      group: { name: "shared", pull: "clone", put: false },
      sort: false,
      animation: 150
    });
    new Sortable(document.getElementById("builderArea"), {
      group: "shared",
      animation: 150
    });

    $("#btnEvaluate").click(() => {
      const expression = Array.from($("#builderArea .block")).map(b => $(b).text()).join('');
      if (!expression) return $("#builderResult").text("Belum ada ekspresi.");
      $("#builderResult").html(`Ekspresi kamu: <code>${expression}</code><br><b>Tebakan:</b> ${expression.includes("'") ? 'Mengandung komplemen' : 'Belum ada komplemen'}`);
      $("#successSound")[0].play();
    });

    $("#btnClear").click(() => {
      $("#builderArea").html("");
      $("#failSound")[0].play();
    });
  </script>
</body>
</html>